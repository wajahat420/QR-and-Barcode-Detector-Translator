<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Chatbot</title>

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />

	<link rel="stylesheet" href="../static/styles/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<!-- <script src="{{url_for('static',filename='script.js')}}"></script>
	<script src="{{url_for('static',filename='onpageLoad.js')}}"></script> -->

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script>
	</script>
	 <title>C-Boys Scanner</title>
	 <style>

	 </style>
	 
</head>
  	<body >
		
		<h1>PDF</h1>
		<input id="uploadPdf" onchange="file('uploadPdf')" name="upload pdf" type="file" accept="application/pdf" />
		<input onclick="extractPdfBarcodes()" type="button" value="Extract Barcodes"/>

		<h1 id="chck">Image</h1>
		<input id="uploadImg" onchange="file('uploadImg')"  type="file" />
		<img id="image" width="200" height="300" 
			src=""
			alt="not entered yet"/>

		<br/>
		<br/>
		<input onclick="extractImageBarcodes()" type="button" value="Extract Barcodes"/>
	

	</body>
	<script>
		let imageBase64 = ""
		let pdfBase64 = ""
		extractImageBarcodes = () =>{
			if(imageBase64 !== ""){
				$.ajax({
					url: "/imageBase64",
					type: "POST",
					data: { text: imageBase64 }
				})
			}else{
				alert("Kindly Upload An Image First")
			}

		}
		extractPdfBarcodes = () =>{
			if(pdfBase64 !== ""){
				$.ajax({
					url: "/pdfBase64",
					type: "POST",
					data: { text: pdfBase64 }
				})
				.then(res=>console.log(res))
			}else{
				alert("Kindly Upload An Image First")
			}

		}
		file = (id) =>  {

			const reader = new FileReader();
			reader.onload = () => {
				if(id === "uploadImg"){
					document.getElementById("image").src = reader.result	
					imageBase64 = reader.result		
				}else{
					pdfBase64 = reader.result
				}
			}

			reader.readAsDataURL(document.getElementById(id).files[0]);
			
			reader.onloadstart = () => {
			console.log("load start")
			}
			reader.onloadend = () => {
			console.log("load end")
			} 
    
        	}
	 </script>
</html>
